---
title: Rastreamento da lógica do fluxo de trabalho
description: Descrição
solution: Campaign,Campaign Classic v7,Campaign v8
product: Campaign,Campaign Classic v7,Campaign v8
applies-to: Campaign Classic,Campaign,Campaign Classic v7,Campaign v8
keywords: KCS,Rastreamento da lógica do fluxo de trabalho
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Ananya Kuthiala
article-created-date: 5/10/2022 1:38:14 PM
article-published-by: Ananya Kuthiala
article-published-date: 5/10/2022 1:38:54 PM
version-number: 2
article-number: KA-17739
dynamics-url: https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=b1655370-66d0-ec11-a7b5-0022480a8e40
exl-id: fddd4869-ca73-4875-ae46-563272a7d172
source-git-commit: e8f4ca2dd578944d4fe399074fab461de88ad247
workflow-type: tm+mt
source-wordcount: '382'
ht-degree: 0%

---

# Rastreamento da lógica do fluxo de trabalho

## Descrição


O workflow de rastreamento mostra apenas 1 comando sem muita explicação: <b>tracking -instance:%= instanceName % -download -update</b>



O objetivo deste artigo KB é listar as etapas do fluxo de trabalho no back-end:

<b>Etapa 1</b> - baixar e inserir logs de rastreamento no banco de dados (NmsTrackingLogXXX). Durante a etapa -download , o fluxo de trabalho não registrará nada.

-download só buscará o log de rastreamento dos diferentes contêineres de rastreamento e os armazenará no banco de dados.

<b>Etapa 2</b> - crie estatísticas de log de rastreamento (NmsTrackingStats).

-update consolidará os logs criando registros agregados em NmsTrackingStats. A tabela inteira é atualizada com base nos deliveries que estão marcados para atualização. Todos os relatórios de rastreamento estão buscando dados nessa tabela. Você pode fazer essa etapa manualmente para cada delivery sem estatísticas de Tracking clicando em &quot;recomputar estatísticas de delivery&quot;.

<b>Etapa 3</b> um final - recrie as estatísticas de delivery (NmsDeliveryLogStats) para todos os deliveries afetados por um clique ou abertura (os deliveries são processados um por um...)

O workflow de rastreamento também atualizará várias outras tabelas:

NmsUserAgentReject NmsDelivery NmsUserAgent NmsTrackingLogRcp NmsTrackingStats

É importante verificar a taxa de fragmentação dos índices nesses quadros. <u>Se a fragmentação do índice for superior a 30-35%, o índice precisará ser reconstruído.</u> Para clientes hospedados, o Adobe executa essa operação de manutenção uma vez por mês. Se os índices das tabelas não forem recriados regularmente, a execução do workflow de rastreamento será retardada.

<b>Para ver as consultas exatas executadas pelo workflow de rastreamento, use o comando :</b>

*nlserver tracking -instance:instanceName -download -update -verbose -tracefilter:\&lt;b>

Este comando criará um log adicional dentro de </b>/var/instanceName/log/tracking.log <b>com todas as consultas executadas durante a execução do workflow de rastreamento.

Às vezes, os clientes perguntam se podem ignorar o processo de atualização? A resposta é NÃO: As estatísticas de rastreamento não serão atualizadas, os dados serão inválidos, o que pode levar a vários outros problemas com relação ao rastreamento que gostaríamos de evitar de qualquer maneira necessária.

Quando a execução do workflow de rastreamento for concluída, a opção </b>NmsTracking_Pointer <b>é atualizado. O valor da opção mostrará a data do último log recuperado em todos os contêineres do servidor de rastreamento e a ID da mensagem em formato decimal. Se convertirmos essa id em hexadecimal, será o nome do arquivo de rastreamento armazenado no servidor de rastreamento.


## Resolução


Este artigo explica a lógica do fluxo de trabalho para que não exija uma resolução.
