---
title: Campaign Classic - As funções SHA256 e SHA512 retornam a segunda atualização incorreta do hash
description: Descrição
solution: Campaign
product: Campaign
applies-to: Campaign Classic,Campaign
keywords: KCS - As funções SHA256 e SHA512 retornam a segunda atualização incorreta do hash
resolution: Resolution
internal-notes: https://jira.corp.adobe.com/browse/NEO-26500, E-000202021, E-000148142
bug: true
article-created-by: Marta Zator
article-created-date: 5/9/2022 2:40:05 PM
article-published-by: Marta Zator
article-published-date: 5/9/2022 2:45:38 PM
version-number: 2
article-number: KA-16235
dynamics-url: https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=cac10be5-a5cf-ec11-a7b5-0022480a8e40
exl-id: d8803e40-5813-4fd4-921d-df10956e1e74
source-git-commit: 0c3e421beca46d9fe1952b1f98538a50697216a0
workflow-type: tm+mt
source-wordcount: '258'
ht-degree: 1%

---

# Campaign Classic - As funções SHA256 e SHA512 retornam a segunda atualização incorreta do hash

## Descrição


O cliente relatou que a função SHA256 e SHA512 retorna um hash errado.

Eles descobriram que alguns usuários também têm esse problema aqui.
https://experienceleaguecommunities.adobe.com/t5/adobe-campaign-classic-questions/sha256-and-sha512-function-returns-wrong-hash/qaq-p/351035/comment-id/3882


## Resolução


O cliente compartilhou uma solução que encontrou:

O problema ocorreu porque o Adobe converte o tipo de dados da cadeia de caracteres para `nvarchar` em vez de `varchar` no caso em que o banco de dados está usando a codificação unicode.
No caso do cliente, o padrão de codificação do banco de dados é usado como unicode para oferecer suporte ao idioma tailandês. É por isso que o Adobe converteu a sequência em nvarchar.

Para as funções SHA256 e SHA512, funciona como normal, mas retornará valores diferentes de hash para `varchar` e `nvarchar`.

No caso do cliente, foi possível alterar esse campo (contendo apenas um número de celular) para `varchar` e o hash corretamente.

Artigo da Comunidade Adobe:
[https://experienceleaguecommunities.adobe.com/t5/adobe-campaign-classic-questions/sha256-and-sha512-functions-returning-wrong-hash/qaq-p/351034](https://experienceleaguecommunities.adobe.com/t5/adobe-campaign-classic-questions/sha256-and-sha512-functions-returning-wrong-hash/qaq-p/351034)



Além disso, se a variável [!DNL SQL Server] for usada, a função digest usará a representação utf-16 da string. Você não obterá o resumo esperado (que geralmente é calculado em ascii ou caractere ut-8).

Exemplo: &quot;hello&quot; dará 14cde7c9ad35de5a37fce2ac276742175028fd9f7cdf0dae01ff508b126429d9 como sha2-256 sobre a representação ascii/utf-8 da string e dará 18fe2820b38427a08a5b49fb4d71a7027799bfe0050d3050ca4d3 491a85aa0eb na representação utf-16.
