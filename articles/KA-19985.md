---
title: '"Adobe Experience Manager: Os arquivos de cache do Dispatcher são atualizados inesperadamente'''
description: Descrição
solution: Experience Manager
product: Experience Manager
applies-to: Experience Manager
keywords: KCS
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Nobuhiro Hashimoto
article-created-date: 6/30/2022 5:05:25 AM
article-published-by: Nobuhiro Hashimoto
article-published-date: 6/30/2022 5:08:03 AM
version-number: 2
article-number: KA-19985
dynamics-url: https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=b083b13c-32f8-ec11-bb3d-000d3a5b0be0
exl-id: 57f937e5-0e45-4fba-b158-e8870ab1b868
source-git-commit: e8f4ca2dd578944d4fe399074fab461de88ad247
workflow-type: tm+mt
source-wordcount: '260'
ht-degree: 1%

---

# Adobe Experience Manager: Os arquivos de cache do Dispatcher são atualizados inesperadamente

## Descrição


Às vezes, você pode achar que os arquivos de cache do Dispatcher são atualizados em um momento ou frequência inesperada. Este artigo explica como analisar tal situação.

<b>Ambientes</b>
AEM as a Cloud Service, AEM 6.5


## Resolução


Após a publicação do conteúdo, o AEM envia uma solicitação de invalidação de cache (GET /dispatcher/invalidate.cache) para o Dispatcher. Depois disso, quando uma solicitação de conteúdo chega ao Dispatcher, ela atualiza seus arquivos em cache.

Com base nesse comportamento, procure por um padrão coletando os logs sobre as solicitações de invalidação de cache e as solicitações de conteúdo.

Exemplo de logs para uma solicitação de invalidação:
<br>Dispatcher - access_log


```
127.0.0.1 - - 07/Jun/2022:13:44:35 +0900 "GET /dispatcher/invalidate.cache HTTP/1.1" 200 13 "about:blank" "Jakarta Commons-HttpClient/3.1"
```

<br>Dispatcher - dispatcher.log


```
07/Jun/2022:13:44:35 +0900 "GET /dispatcher/invalidate.cache HTTP/1.1" 200 purge publish/- 0ms
```

<br>Publicar - error.log


```
07.06.2022 13:44:35.750 *INFO* sling-threadpool-f158f7aa-d59d-4d34-9bfa-be84a03a917f-(apache-sling-job-thread-pool)-1-com_day_cq_replication_job_flush(com/day/cq/replication/job/flush) com.day.cq.replication.Agent.flush Sending GET request to http://localhost:80/dispatcher/invalidate.cache
...
07.06.2022 13:44:35.758 *INFO* sling-threadpool-f158f7aa-d59d-4d34-9bfa-be84a03a917f-(apache-sling-job-thread-pool)-1-com_day_cq_replication_job_flush(com/day/cq/replication/job/flush) com.day.cq.replication.Agent.flush Replication (ACTIVATE) of /content/we-retail/us/en/products successful.
```




<b>Causa</b>

Estes são casos típicos em que os arquivos de cache do Dispatcher são atualizados inesperadamente.


<u>Caso 1 - Atualizações frequentes do cache para conteúdos inesperados</u>

Os arquivos de cache são atualizados com frequência, mas o conteúdo atualizado não é o destino da solicitação de invalidação de cache.

Nesse caso, o valor de /statfileslevel na configuração do Dispatcher pode ser muito baixo. Observe que comentar /statfileslevel no dispatcher.any significa &quot;0&quot; para esse valor.

Quando você tem /statfileslevel &quot;0&quot; e publica conteúdo, todos os arquivos de cache são invalidados independentemente dos caminhos. A referência descreve os detalhes.

https://experienceleague.adobe.com/docs/experience-manager-dispatcher/using/configuring/dispatcher-configuration.html#invalidating-files-by-folder-level


<u>Caso 2 - Solicitações de invalidação de cache de um cliente indesejado</u>

A configuração do Dispatcher pode não ter uma restrição apropriada para solicitações de invalidação de cache. Marque /allowedClients em dispatcher.any.


<u>Caso 3 - Nenhuma solicitação de invalidação de cache</u>

A configuração do Dispatcher pode usar a invalidação do cache com base no tempo. Nesse caso, /enableTTL &quot;1&quot; deve existir no dispatcher.any.
